# å¤š Agent æ™ºèƒ½ç³»ç»Ÿ - å¢å¼ºç‰ˆ (agentdemo)

ä¸€ä¸ªä¸“æ³¨äºè¶…æ—¶å¤„ç†å’Œæ—¥å¿—è®°å½•çš„å¥å£®å¤š Agent æ™ºèƒ½ç³»ç»Ÿã€‚

## ğŸš€ ç‰¹æ€§

### æ ¸å¿ƒç‰¹æ€§
- **å¤š Agent åä½œ**: åè°ƒå™¨åŠ¨æ€åè°ƒå¤šä¸ªä¸“ä¸š Agent ååŒå·¥ä½œ
- **å¢å¼ºçš„è¶…æ—¶å¤„ç†**: åŠ¨æ€è¶…æ—¶è°ƒæ•´ã€è¶…æ—¶é¢„è­¦ã€ä¼˜é›…é™çº§
- **ç»“æ„åŒ–æ—¥å¿—è®°å½•**: è¯¦ç»†çš„æ€§èƒ½ç›‘æ§å’Œé—®é¢˜æ’æŸ¥æ”¯æŒ
- **å¥å£®çš„é”™è¯¯å¤„ç†**: é‡è¯•æœºåˆ¶ã€é»˜è®¤å“åº”ã€ç³»ç»Ÿç¨³å®šæ€§ä¿éšœ

### è¶…æ—¶å¤„ç†å¢å¼º
- **åŠ¨æ€è¶…æ—¶è°ƒæ•´**: æ ¹æ®æ¶ˆæ¯å¤æ‚åº¦è‡ªåŠ¨è°ƒæ•´è¶…æ—¶æ—¶é—´
- **è¶…æ—¶é¢„è­¦æœºåˆ¶**: 80% è¶…æ—¶é˜ˆå€¼é¢„è­¦
- **æŒ‡æ•°é€€é¿é‡è¯•**: æ™ºèƒ½é‡è¯•ç­–ç•¥ï¼Œé¿å…é›ªå´©æ•ˆåº”
- **ä¼˜é›…é™çº§**: è¶…æ—¶æˆ–é”™è¯¯æ—¶è¿”å›é»˜è®¤å“åº”ï¼Œä¿è¯ç³»ç»Ÿå¯ç”¨æ€§

### æ—¥å¿—ç³»ç»Ÿå¢å¼º
- **ç»“æ„åŒ–æ—¥å¿—**: ç»Ÿä¸€çš„æ—¥å¿—æ ¼å¼ï¼Œä¾¿äºåˆ†æå’Œç›‘æ§
- **æ€§èƒ½ç›‘æ§**: è¯¦ç»†çš„æ‰§è¡Œæ—¶é—´ã€è¶…æ—¶æ¬¡æ•°ã€é‡è¯•æ¬¡æ•°ç»Ÿè®¡
- **é—®é¢˜æ’æŸ¥**: å…³é”®ç¯èŠ‚éƒ½æœ‰è¯¦ç»†æ—¥å¿—ï¼Œå¿«é€Ÿå®šä½é—®é¢˜
- **æ—¥å¿—å¯¼å‡º**: æ”¯æŒæ—¥å¿—å¯¼å‡ºå’Œåˆ†æ

## ğŸ“ é¡¹ç›®ç»“æ„

```
agentdemo/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agents/              # Agent åŸºç±»å’Œåè°ƒå™¨
â”‚   â”‚   â”œâ”€â”€ base_agent.py    # å¢å¼ºçš„ BaseAgent ç±»
â”‚   â”‚   â””â”€â”€ coordinator_agent.py
â”‚   â”œâ”€â”€ core/                # æ ¸å¿ƒç³»ç»Ÿç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ agent_system.py  # å¢å¼ºçš„åŠ¨æ€ Agent ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ iteration_controller.py  # å¢å¼ºçš„è¿­ä»£æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ agent_models.py  # Agent ç›¸å…³æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ plugins/             # æ’ä»¶ Agent
â”‚   â”‚   â”œâ”€â”€ weather_agent.py # å¤©æ°”æŸ¥è¯¢ Agent
â”‚   â”‚   â”œâ”€â”€ transport_agent.py # äº¤é€šæŸ¥è¯¢ Agent
â”‚   â”‚   â””â”€â”€ budget_agent.py  # é¢„ç®—åˆ†æ Agent
â”‚   â””â”€â”€ utils/               # å·¥å…·ç±»
â”‚       â””â”€â”€ logger_manager.py # å¢å¼ºçš„æ—¥å¿—ç®¡ç†å™¨
â”œâ”€â”€ config.yaml              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ main.py                  # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ requirements.txt         # ä¾èµ–åŒ…
â””â”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
```

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. é…ç½® API å¯†é’¥

ç¼–è¾‘ `config.yaml` æ–‡ä»¶ï¼Œè®¾ç½®æ‚¨çš„ OpenAI API å¯†é’¥ï¼š

```yaml
api:
  openai:
    key: "your_openai_api_key_here"  # æ›¿æ¢ä¸ºæ‚¨çš„ API å¯†é’¥
```

æˆ–è€…é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®ï¼š
```bash
export AGENTDEMO_API_KEY="your_openai_api_key_here"
```

### 3. è¿è¡Œç³»ç»Ÿ

**æ¼”ç¤ºæ¨¡å¼**:
```bash
python main.py --mode demo
```

**äº¤äº’æ¨¡å¼**:
```bash
python main.py --mode interactive
```

**æŒ‡å®š API å¯†é’¥**:
```bash
python main.py --api-key "your_api_key" --mode demo
```

## ğŸ”§ é…ç½®è¯´æ˜

### è¶…æ—¶é…ç½®
```yaml
timeout:
  default_timeout: 30
  max_timeout: 120
  retry_config:
    max_retries: 3
    retry_delay: 1.0
    exponential_backoff: true
    max_retry_delay: 10.0
```

### è¿­ä»£é…ç½®
```yaml
iteration:
  max_iterations: 5
  timeout_warning_threshold: 0.8  # 80% è¶…æ—¶é¢„è­¦
  phase_timeouts:
    think: 30
    plan: 30
    action: 60
    next: 15
```

### æ—¥å¿—é…ç½®
```yaml
logging:
  level: "INFO"
  file_logging: true
  log_file: "logs/agentdemo.log"
  max_file_size: 10485760  # 10MB
```

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨

```python
import asyncio
from agentdemo import EnhancedDynamicAgentSystem

async def main():
    # åˆå§‹åŒ–ç³»ç»Ÿ
    system = EnhancedDynamicAgentSystem("your_api_key")
    await system.initialize_system()
    
    # å¤„ç†æŸ¥è¯¢
    result = await system.process_query("æˆ‘æƒ³å»åŒ—äº¬æ—…æ¸¸3å¤©ï¼Œå¸®æˆ‘è§„åˆ’ä¸€ä¸‹è¡Œç¨‹")
    print(result["final_result"]["content"])
    
    # å…³é—­ç³»ç»Ÿ
    await system.shutdown_system()

asyncio.run(main())
```

### è·å–ç³»ç»ŸçŠ¶æ€

```python
# è·å–ç³»ç»ŸçŠ¶æ€
status = system.get_system_status()
print(f"ç³»ç»ŸçŠ¶æ€: {status.overall_status}")
print(f"æ´»è·ƒ Agent: {status.active_agents}")

# è·å–æ€§èƒ½æŒ‡æ ‡
metrics = system.get_performance_metrics()
print(f"æˆåŠŸç‡: {metrics['system']['success_rate']}%")
print(f"å¹³å‡å“åº”æ—¶é—´: {metrics['system']['avg_response_time']}s")
```

## ğŸ” è¶…æ—¶å¤„ç†æœºåˆ¶

### 1. åŠ¨æ€è¶…æ—¶è°ƒæ•´
- æ ¹æ®æ¶ˆæ¯å¤æ‚åº¦è‡ªåŠ¨è°ƒæ•´è¶…æ—¶æ—¶é—´
- å¤æ‚æç¤ºä½¿ç”¨æ›´é•¿çš„è¶…æ—¶æ—¶é—´
- ç®€å•æŸ¥è¯¢ä½¿ç”¨æ ‡å‡†è¶…æ—¶æ—¶é—´

### 2. è¶…æ—¶é¢„è­¦
- 80% è¶…æ—¶é˜ˆå€¼æ—¶å‘å‡ºé¢„è­¦
- è®°å½•æ¥è¿‘è¶…æ—¶çš„æ“ä½œ
- æå‰é¢„è­¦æ½œåœ¨é—®é¢˜

### 3. é‡è¯•æœºåˆ¶
- æŒ‡æ•°é€€é¿é‡è¯•ç­–ç•¥
- æœ€å¤§é‡è¯•æ¬¡æ•°é™åˆ¶
- é‡è¯•æ—¶å¢åŠ è¶…æ—¶æ—¶é—´

### 4. ä¼˜é›…é™çº§
- è¶…æ—¶æ—¶è¿”å›é»˜è®¤å“åº”
- é”™è¯¯æ—¶æä¾›å‹å¥½çš„é”™è¯¯ä¿¡æ¯
- ä¿è¯ç³»ç»ŸåŸºæœ¬åŠŸèƒ½å¯ç”¨

## ğŸ“Š æ—¥å¿—å’Œç›‘æ§

### æ—¥å¿—çº§åˆ«
- **DEBUG**: è¯¦ç»†è°ƒè¯•ä¿¡æ¯
- **INFO**: æ­£å¸¸æ“ä½œä¿¡æ¯
- **WARNING**: è­¦å‘Šä¿¡æ¯
- **ERROR**: é”™è¯¯ä¿¡æ¯
- **CRITICAL**: ä¸¥é‡é”™è¯¯ä¿¡æ¯

### ç›‘æ§æŒ‡æ ‡
- è¯·æ±‚æˆåŠŸç‡
- å¹³å‡å“åº”æ—¶é—´
- è¶…æ—¶ç‡
- é‡è¯•æ¬¡æ•°
- Agent æ€§èƒ½æŒ‡æ ‡

## ğŸ§ª æµ‹è¯•

è¿è¡Œæµ‹è¯•ï¼š
```bash
pytest tests/ -v
```

è¿è¡Œæ€§èƒ½æµ‹è¯•ï¼š
```bash
python tests/performance_test.py
```

## ğŸ› é—®é¢˜æ’æŸ¥

### å¸¸è§é—®é¢˜

1. **API å¯†é’¥é”™è¯¯**
   - æ£€æŸ¥ `config.yaml` ä¸­çš„ API å¯†é’¥é…ç½®
   - ç¡®è®¤ç¯å¢ƒå˜é‡è®¾ç½®æ­£ç¡®

2. **è¶…æ—¶é—®é¢˜**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - è°ƒæ•´è¶…æ—¶é…ç½®
   - æŸ¥çœ‹æ—¥å¿—ä¸­çš„è¶…æ—¶é¢„è­¦

3. **Agent åŠ è½½å¤±è´¥**
   - æ£€æŸ¥æ’ä»¶ Agent çš„ç±»åå’Œæ–‡ä»¶è·¯å¾„
   - ç¡®è®¤ Agent ç±»ç»§æ‰¿è‡ª BaseAgent

### æ—¥å¿—åˆ†æ

æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼š
```bash
tail -f logs/agentdemo.log
```

å¯¼å‡ºæ—¥å¿—è¿›è¡Œåˆ†æï¼š
```python
from agentdemo import logger_manager
logger_manager.export_logs("analysis_logs.json")
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **è°ƒæ•´è¶…æ—¶é…ç½®**: æ ¹æ®å®é™…ç½‘ç»œçŠ¶å†µè°ƒæ•´è¶…æ—¶æ—¶é—´
2. **å¯ç”¨ç¼“å­˜**: åœ¨é…ç½®ä¸­å¯ç”¨ç¼“å­˜å‡å°‘é‡å¤è¯·æ±‚
3. **ç›‘æ§æ€§èƒ½**: å®šæœŸæ£€æŸ¥æ€§èƒ½æŒ‡æ ‡ï¼ŒåŠæ—¶å‘ç°ç“¶é¢ˆ
4. **ä¼˜åŒ–æç¤º**: ç®€åŒ–å¤æ‚çš„æç¤ºè¯ï¼Œå‡å°‘å“åº”æ—¶é—´

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ [agent_muti](https://github.com/your-repo/agent_muti) é¡¹ç›®çš„å¯å‘å’Œå‚è€ƒã€‚
