
### 架构图
```commandline
┌─────────────────────────────────────────────────────────────┐
│                    Multi-Agent Discussion System            │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │   User      │    │  Analyzer   │    │ Moderator   │     │
│  │  Interface  │◄──►│   Agent     │◄──►│   Agent     │     │
│  └─────────────┘    └─────────────┘    └─────────────┘     │
│         │                       │              │           │
│         └───────────────────────┼──────────────┘           │
│                                 │                          │
│  ┌─────────────────────────────────────────────────────┐   │
│  │               Discussion Session                    │   │
│  ├─────────────────────────────────────────────────────┤   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  │   │
│  │  │  Expert     │  │  Expert     │  │  Expert     │  │   │
│  │  │  Agent 1    │  │  Agent 2    │  │  Agent 3    │  │   │
│  │  │             │  │             │  │             │  │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  │   │
│  │         │                │                │         │   │
│  │         └────────────────┼────────────────┘         │   │
│  │                          │                          │   │
│  │                 ┌─────────────────┐                 │   │
│  │                 │ Discussion State│                 │   │
│  │                 │ & History       │                 │   │
│  │                 └─────────────────┘                 │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │  Plugin     │    │  Knowledge  │    │  Consensus  │     │
│  │  Manager    │    │   Base      │    │  Checker    │     │
│  └─────────────┘    └─────────────┘    └─────────────┘     │
└─────────────────────────────────────────────────────────────┘
```

### 代码结构
```commandline
multi_agent_discussion/
├── core/
│   ├── __init__.py
│   ├── base_agent.py          # 智能体基类
│   ├── session_manager.py     # 会话管理
│   ├── plugin_manager.py      # 插件管理
│   └── consensus_checker.py   # 一致性检查
├── agents/
│   ├── __init__.py
│   ├── analyzer_agent.py      # 分析智能体
│   ├── moderator_agent.py     # 会议主持智能体
│   └── expert_agents/
│       ├── __init__.py
│       ├── base_expert.py     # 专家基类
│       ├── tech_expert.py     # 技术专家
│       ├── business_expert.py # 商业专家
│       └── research_expert.py # 研究专家
├── plugins/
│   ├── __init__.py
│   ├── web_search.py          # 联网搜索插件
│   ├── knowledge_base.py      # 知识库插件
│   └── reflection_tool.py     # 反思工具插件
├── utils/
│   ├── __init__.py
│   ├── config.py
│   ├── logger.py
│   └── network_tools.py
├── config/
│   ├── agent_config.yaml
│   └── discussion_flow.yaml
└── main.py
```

### 提示词
```commandline
你是大模型开发专家，善于使用多agent
现在要开发设计一个基于多智能体讨论决策场景的agent框架
要求
1、先合理思考
2、画架构图和项目
3、支持agent功能可插拔

决策流程
1、用户提出一个问题 即 prompt
2、分析智能体将问题完善，并描述这个任务的做基本需求分析
3、分析智能体，将问题提交给会议主持人智能体(善于分析需求和主持会议)
4、会议下每个智能体掌握独特的技能和特定领域知识，并会联网查询该知识。
5、会议下智能体按照一定顺序依次发言
6、每个智能体接收其他智能体发言，并重新思考
7、重复步骤5、6.直至多个智能体意见达成一致和会议主持人认为需求完成
8、会议主持人最后总结问题，给到用户

注意: 会议主持人，会敏锐发现问题，会恰当适时的，在一个智能体发言后，提出问题，让其反思

根据上面项目代码结构 补全剩余代码 ，如果一次写不完提示用户输入 继续 接着写
```

分析
```md
架构设计：
1. 用户提出问题（prompt）
2. 分析智能体（Analyzer Agent）对问题进行分析和完善，并描述任务的基本需求。
3. 分析智能体将问题提交给会议主持人智能体（Moderator Agent）。
4. 会议主持人智能体负责主持会议，邀请多个领域专家智能体参与讨论。
5. 每个专家智能体按照顺序发言，并且可以接收其他智能体的发言，重新思考。
6. 会议主持人智能体会在适当的时候提出问题，引导讨论。
7. 重复步骤5和6，直到达成一致或会议主持人认为需求完成。
8. 会议主持人总结并输出给用户。
```